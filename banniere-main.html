<!-- Preload critical resources -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" href="https://assets.zyrosite.com/mP4MMz6V72uwoDM5/pole-dance-le-plessis-pate-91-Aq2J52xz08hxxwq9.mp4" as="video" type="video/mp4">

<!-- Hero video banner for Demon Spin -->
<section class="hero-video">
    <!-- Background videos for seamless transition -->
    <video class="hero-video__bg hero-video__bg--primary" 
           src="https://assets.zyrosite.com/mP4MMz6V72uwoDM5/pole-dance-le-plessis-pate-91-Aq2J52xz08hxxwq9.mp4" 
           autoplay 
           muted 
           playsinline 
           webkit-playsinline
           preload="auto"
           disablePictureInPicture
           disableRemotePlayback
           x-webkit-airplay="deny"
           poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1920 1080'%3E%3Crect width='100%25' height='100%25' fill='%230d2b32'/%3E%3C/svg%3E"></video>
    
    <video class="hero-video__bg hero-video__bg--secondary" 
           src="https://assets.zyrosite.com/mP4MMz6V72uwoDM5/pole-dance-le-plessis-pate-91-Aq2J52xz08hxxwq9.mp4" 
           muted 
           playsinline 
           webkit-playsinline
           preload="auto"
           disablePictureInPicture
           disableRemotePlayback
           x-webkit-airplay="deny"
           style="opacity: 0; z-index: -1;"></video>
  
    <!-- Overlay content -->
    <div class="hero-video__content">
      <h1>L'ÉCOLE DE LA<br>POLE DANCE ET DU FUN</h1>
  
      <p>Pole dance, cerceau aérien, souplesse… Chez Demon Spin, tu te dépasses, tu te renforces et tu t'épanouis dans une ambiance fun, bienveillante et pleine d’énergie.</p>
  
      <!-- Action buttons -->
      <div class="hero-video__buttons">
        <a href="/#bienvenue" class="btn btn-primary" target="_top">Découvrir</a>
        <a href="/reservation" class="btn btn-secondary" target="_top">Réserver un cours</a>
      </div>
    </div>
  </section>
  
  <style>
    /* Import Google Font - optimized */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap');
  
    /* Full‑bleed banner – optimized for performance */
    .hero-video{
      position:relative;
      width:100vw;
      left:50%;
      transform:translateX(-50%);
      height:600px;
      max-height:600px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      color:#ffffff;
      overflow:hidden;
      background:#0d2b32;
      font-family:'Poppins',sans-serif;
      /* Performance optimizations */
      will-change:transform;
      backface-visibility:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
  
         /* Videos optimized for GPU acceleration and transitions */
     .hero-video__bg{
       position:absolute;
       inset:0;
       width:100%;
       height:100%;
       object-fit:cover;
       z-index:0;
       /* Performance optimizations */
       will-change:transform,opacity;
       transform:translateZ(0);
       backface-visibility:hidden;
       transition:opacity 1s ease-in-out;
       /* Masquer complètement les contrôles vidéo */
       pointer-events:none;
     }
     
     /* Masquer tous les contrôles de vidéo */
     .hero-video__bg::-webkit-media-controls {
       display: none !important;
     }
     
     .hero-video__bg::-webkit-media-controls-panel {
       display: none !important;
     }
     
     .hero-video__bg::-webkit-media-controls-play-button {
       display: none !important;
     }
     
     .hero-video__bg::-webkit-media-controls-timeline {
       display: none !important;
     }
     
     .hero-video__bg::-webkit-media-controls-current-time-display {
       display: none !important;
     }
     
     .hero-video__bg::-webkit-media-controls-time-remaining-display {
       display: none !important;
     }
     
     .hero-video__bg::-webkit-media-controls-mute-button {
       display: none !important;
     }
     
     .hero-video__bg::-webkit-media-controls-volume-slider {
       display: none !important;
     }
     
     .hero-video__bg::-webkit-media-controls-fullscreen-button {
       display: none !important;
     }
     
     .hero-video__bg::-webkit-media-controls-overlay-play-button {
       display: none !important;
     }
     
     /* Pour Firefox */
     .hero-video__bg::-moz-media-controls {
       display: none !important;
     }
     
     /* Pour tous les navigateurs */
     .hero-video__bg::media-controls {
       display: none !important;
     }
     
     .hero-video__bg--primary{
       z-index:0;
     }
     
     .hero-video__bg--secondary{
       z-index:-1;
     }
     
     .hero-video__bg.transitioning{
       z-index:1;
     }
  
    /* Overlay optimized */
    .hero-video::before{
      content:"";
      position:absolute;
      inset:0;
      background:rgba(0,0,0,.35);
      z-index:1;
      pointer-events:none;
      /* GPU acceleration */
      transform:translateZ(0);
      will-change:opacity;
    }
  
    /* Content block optimized */
    .hero-video__content{
      position:relative;
      z-index:2;
      max-width:900px;
      padding:0 1rem;
      /* Text rendering optimization */
      text-rendering:optimizeLegibility;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    
    .hero-video__content h1{
      font-size:64px;
      line-height:1.15;
      font-weight:550;
      margin:0 0 1rem;
      /* Performance */
      contain:layout style paint;
    }
    
    .hero-video__content p{
      font-size:16px;
      line-height:1.6;
      margin:0 auto 2rem;
      max-width:50ch;
      /* Performance */
      contain:layout style paint;
    }
  
    /* Buttons optimized */
    .hero-video__buttons{
      display:flex;
      gap:1.5rem;
      flex-wrap:wrap;
      justify-content:center;
      /* GPU acceleration for smooth animations */
      transform:translateZ(0);
    }
    
    .hero-video__buttons .btn{
      padding:0.75rem 2.5rem;
      border-radius:9999px;
      font-size:16px;
      font-weight:600;
      text-decoration:none;
      color:#ffffff;
      /* Optimized transitions */
      transition:background-color .2s ease,color .2s ease,border-color .2s ease,transform .2s ease;
      /* GPU acceleration */
      will-change:background-color,color,transform;
      transform:translateZ(0);
      backface-visibility:hidden;
    }
    
    .btn-primary{border:2px solid #ffffff;}
    .btn-secondary{border:2px solid transparent;}
  
    .hero-video__buttons .btn:hover{
      background:#ffffff;
      color:#0d2b32;
      transform:translateZ(0) scale(1.02);
    }
  
    /* Mobile optimizations */
    @media(max-width:768px){
      .hero-video{
        height:auto;
        min-height:400px;
        padding:2rem 0;
        /* Mobile performance */
        -webkit-transform:translateX(-50%);
        transform:translateX(-50%);
      }
      
      .hero-video__content{
        padding:0 1rem;
        max-width:100%;
      }
      
      .hero-video__content h1{
        font-size:36px;
        margin:0 0 1.5rem;
        /* Mobile text optimization */
        text-size-adjust:none;
      }
      
      .hero-video__content p{
        font-size:14px;
        max-width:90%;
        margin:0 auto 2rem;
        text-size-adjust:none;
      }
      
      .hero-video__buttons{
        flex-direction:column;
        gap:1rem;
      }
      
      .hero-video__buttons .btn{
        width:100%;
        max-width:260px;
        margin:0 auto;
        font-size:14px;
        padding:0.75rem 2rem;
        /* Mobile touch optimization */
        touch-action:manipulation;
        -webkit-tap-highlight-color:transparent;
      }
    }
    
         /* Critical performance hints */
     @media(prefers-reduced-motion:reduce){
       .hero-video__buttons .btn{
         transition:none;
       }
       .hero-video__buttons .btn:hover{
         transform:none;
       }
     }
     
     /* Fallback pour iOS si la vidéo ne se lance pas */
     .hero-video.video-fallback{
       background: linear-gradient(135deg, #0d2b32 0%, #1a4a52 50%, #0d2b32 100%);
     }
     
     .hero-video.video-fallback .hero-video__bg{
       opacity: 0 !important;
     }
     
         </style>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      const videoPrimary = document.querySelector('.hero-video__bg--primary');
      const videoSecondary = document.querySelector('.hero-video__bg--secondary');
      let isTransitioning = false;
      let activeVideo = videoPrimary;
      let inactiveVideo = videoSecondary;
      
      // Détecter iOS
      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                   (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
      
      // Fonction pour forcer le démarrage des vidéos sur iOS
      function forceVideoPlay() {
        if (videoPrimary && videoPrimary.paused) {
          videoPrimary.muted = true;
          videoPrimary.playsInline = true;
          videoPrimary.play().catch(error => {
            console.log('Autoplay bloqué sur ce navigateur:', error);
            // Fallback image sur iOS si autoplay échoue
            if (isIOS) {
              document.querySelector('.hero-video').classList.add('video-fallback');
            }
          });
        }
      }
      
      // Tentative de démarrage immédiat avec délai pour iOS
      if (isIOS) {
        // Sur iOS, attendre un peu pour que la page soit complètement chargée
        setTimeout(forceVideoPlay, 100);
      } else {
        forceVideoPlay();
      }
      
      // Fallback : démarrer la vidéo au premier clic/touch sur la page
      let userInteracted = false;
      function handleFirstInteraction() {
        if (!userInteracted) {
          userInteracted = true;
          forceVideoPlay();
          // Supprimer les event listeners après la première interaction
          document.removeEventListener('touchstart', handleFirstInteraction);
          document.removeEventListener('click', handleFirstInteraction);
          document.removeEventListener('scroll', handleFirstInteraction);
        }
      }
      
      // Écouter les interactions utilisateur
      document.addEventListener('touchstart', handleFirstInteraction, { passive: true });
      document.addEventListener('click', handleFirstInteraction, { passive: true });
      document.addEventListener('scroll', handleFirstInteraction, { passive: true });
      
      // Vérifier si la vidéo démarre dans les 3 secondes
      setTimeout(() => {
        if (videoPrimary && videoPrimary.paused && isIOS) {
          console.log('Vidéo non démarrée sur iOS, activation du fallback');
          document.querySelector('.hero-video').classList.add('video-fallback');
        }
      }, 3000);
      
      if (videoPrimary && videoSecondary) {
        // Fonction pour échanger les vidéos
        function swapVideos() {
          const temp = activeVideo;
          activeVideo = inactiveVideo;
          inactiveVideo = temp;
        }
        
                 // Fonction pour démarrer la transition
         function startTransition() {
           if (isTransitioning) return;
           
           isTransitioning = true;
           
           // Préparer la vidéo inactive - forcer le reset
           inactiveVideo.pause();
           inactiveVideo.currentTime = 0;
           inactiveVideo.style.opacity = '0';
           inactiveVideo.style.zIndex = '1'; // Mettre au-dessus
           
           // Petit délai pour s'assurer que currentTime est bien à 0
           setTimeout(() => {
             // Démarrer la vidéo inactive depuis le début
             inactiveVideo.play().then(() => {
               // Vérifier qu'on démarre bien depuis le début
               if (inactiveVideo.currentTime > 0.5) {
                 inactiveVideo.currentTime = 0;
               }
               
               // Commencer le fade-in de la nouvelle vidéo
               inactiveVideo.style.opacity = '1';
               
               // Après 1 seconde de superposition, masquer l'ancienne vidéo
               setTimeout(() => {
                 activeVideo.style.opacity = '0';
                 activeVideo.pause();
                 
                 // Remettre l'ancienne vidéo au début pour la prochaine fois
                 activeVideo.currentTime = 0;
                 
                 // Échanger les rôles après la transition
                 setTimeout(() => {
                   // Réorganiser les z-index
                   activeVideo.style.zIndex = '-1';
                   inactiveVideo.style.zIndex = '0';
                   
                   // Échanger les variables
                   swapVideos();
                   isTransitioning = false;
                   
                   // S'assurer que la vidéo active a la bonne opacité
                   activeVideo.style.opacity = '1';
                   
                 }, 100);
                 
               }, 1000);
             }).catch(error => {
               console.error('Erreur lors du démarrage de la vidéo:', error);
               // Fallback en cas d'erreur
               isTransitioning = false;
             });
           }, 50);
         }
        
        // Surveiller la vidéo active
        videoPrimary.addEventListener('timeupdate', function() {
          if (activeVideo === videoPrimary) {
            const duration = videoPrimary.duration;
            const currentTime = videoPrimary.currentTime;
            
            // Démarrer la transition 1 seconde avant la fin
            if (duration - currentTime <= 1 && !isTransitioning) {
              startTransition();
            }
          }
        });
        
        videoSecondary.addEventListener('timeupdate', function() {
          if (activeVideo === videoSecondary) {
            const duration = videoSecondary.duration;
            const currentTime = videoSecondary.currentTime;
            
            // Démarrer la transition 1 seconde avant la fin
            if (duration - currentTime <= 1 && !isTransitioning) {
              startTransition();
            }
          }
        });
        
        // Gérer les erreurs de lecture
        [videoPrimary, videoSecondary].forEach(video => {
          video.addEventListener('error', function() {
            console.error('Erreur de lecture vidéo:', video);
          });
        });
      }
    });
    </script>
  